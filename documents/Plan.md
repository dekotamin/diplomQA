# План автоматизации тестирования комплексного сервиса, взаимодействующего с СУБД и API Банка.
## Перечень автоматизируемых сценариев покупки для двух видов оплаты
1. Провести положительные тест-кейсы при заполнении валидными данными всех полей 
   **Ожидаемый результат:** после ввода валидных данных платеж успешно проходит, нет сообщений об ошибках
2. Провести негативные тест-кейсы при заполнении не валидными данными каждого поля в отдельности, в том числе оставить поля пустыми
   
   **Ожидаемый результат:** возникает сообщение об ошибке в каждом поле, куда введены не валидные данные, платеж не происходит
3. Проверить сохраняет ли приложение информацию в таблицах о том, каким способом был совершен платеж и успешно ли он был совершен. 
   
   **Ожидаемый результат:** в таблицах сохранена информация о способе и успешности платежа.
#### Тест-кейсы
#### Положительные:
#### 1. Заполнить все поля валидными данными для покупки
1. Открыть страницу localhost:8080
2. На странице нажать кнопку "Купить"
3. На появившейся странице выбрать "Оплата по карте"
4. Заполнить поле "Номер карты": 4444 4444 4444 4441
5. Заполнить поля "Месяц", "Год", "Владелец", cvc/cvv
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** Модальное окно с сообщением: "Успешно! Операция одобрена банком", в базе данных запись "Approved" появилась в столбце "status" в таблице "payment_entity"
#### 2. Заполнить все поля валидными данными для покупки в кредит
1. Открыть страницу localhost:8080
2. На странице нажать кнопку "Купить в кредит"
3. На появившейся странице выбрать "Оплата по карте"
4. Заполнить поле "Номер карты": 4444 4444 4444 4441
5. Заполнить поля "Месяц", "Год", "Владелец", "CVC/CVV"
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** Модальное окно с сообщением: "Успешно! Операция одобрена банком", в базе данных появилась "Approved"в столбце "status" в таблице "credit_request_entity"

#### 3. Заполнить поле "Имя" именем через дефис и фамилией при покупке
1. Открыть страницу localhost:8080
2. На странице нажать кнопку "Купить"
3. На появившейся странице выбрать "Оплата по карте"
4. Заполнить поле "Номер карты": 4444 4444 4444 4441
5. Заполнить поля "Месяц", "Год"
6. Заполнить в поле "Владелец": Иван-Иван Иванов
7. Заполнить поле "CVC/CVV"
8. Нажать кнопку "Продолжить"

**Ожидаемый результат:** Модальное окно с сообщением: "Успешно! Операция одобрена банком", в базе данных запись "Approved" появилась в столбце "status" в таблице "payment_entity"
#### Негативные:
#### 4. Заполнить все поля данными для покупки в кредит
1. Открыть страницу localhost:8080
2. На странице нажать кнопку "Купить в кредит"
3. На появившейся странице выбрать "Оплата по карте"
4. Заполнить поле "Номер карты": 4444 4444 4444 4442
5. Заполнить поля "Месяц", "Год", "Владелец", "CVC/CVV"
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** Модальное окно с сообщением: "Неуспешно! Операция не одобрена банком", в базе данных появилась запись "Decline" в столбце "status" в таблице "credit_request_entity"
#### 5. Заполнить все поля данными для покупки
1. Открыть страницу localhost:8080
2. На странице нажать кнопку "Купить"
3. На появившейся странице выбрать "Оплата по карте"
4. Заполнить поле "Номер карты": 4444 4444 4444 4442
5. Заполнить поля "Месяц", "Год", "Владелец", "CVC/CVV"
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** Модальное окно с сообщением: "Неуспешно! Операция не одобрена банком", в базе данных появилась запись "Decline" в столбце "status" в таблице "payment_entity"

#### 6. Не полностью заполнить номер карты при покупке
1. Открыть страницу localhost:8080
2. На странице нажать кнопку "Купить"
3. На появившейся странице выбрать "Оплата по карте"
4. Заполнить поле "Номер карты": 4444 4444 4444
5. Заполнить поля "Месяц", "Год", "Владелец", "CVC/CVV"
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** Оповещение об ошибке в поле "номер карты" и отказ в совершении платежа

#### 7. Не заполнять поле месяц при покупке
1. Открыть страницу localhost:8080
2. На странице нажать кнопку "Купить"
3. На появившейся странице выбрать "Оплата по карте"
4. Заполнить поле "Номер карты": 4444 4444 4444 4441
5. Не заполнять поле "Месяц"
6. Заполнить поля "Год", "Владелец", "CVC/CVV"
7. Нажать кнопку "Продолжить"

**Ожидаемый результат:** Оповещение об ошибке в поле "месяц" и отказ в совершении платежа

#### 8. Заполнить номер карты единицами при покупке в кредит
1. Открыть страницу localhost:8080
2. На странице нажать кнопку "Купить в кредит"
3. На появившейся странице выбрать "Оплата по карте"
4. Заполнить поле "Номер карты": 1111 1111 1111 1111
5. Заполнить поля "Месяц", "Год", "Владелец", "CVC/CVV"
6. Нажать кнопку "Продолжить"

**Ожидаемый результат:** Оповещение об ошибке в поле "номер карты" и отказ в совершении платежа

#### 9. Заполнить поле месяц несуществующим номером при покупке
1. Открыть страницу localhost:8080
2. На странице нажать кнопку "Купить"
3. На появившейся странице выбрать "Оплата по карте"
4. Заполнить поле "Номер карты": 4444 4444 4444 4441
5. Заполнить поле "Месяц": 13
6. Заполнить поля "Год", "Владелец", "CVC/CVV"
7. Нажать кнопку "Продолжить"

**Ожидаемый результат:** Оповещение об ошибке в поле "месяц" и отказ в совершении платежа

#### 10. Заполнить поле на 2 года раньше текущей даты при покупке
1. Открыть страницу localhost:8080
2. На странице нажать кнопку "Купить"
3. На появившейся странице выбрать "Оплата по карте"
4. Заполнить поле "Номер карты": 4444 4444 4444 4441
5. Заполнить поле "Месяц"
6. Заполнить поле на 2 года раньше от текущей даты
7. Заполнить поля: "Владелец", "CVC/CVV"
8. Нажать кнопку "Продолжить"

**Ожидаемый результат:** Оповещение об ошибке в поле "год" и отказ в совершении платежа

#### 11. Заполнить в поле "Владелец" только поле "Имя" при покупке
1. Открыть страницу localhost:8080
2. На странице нажать кнопку "Купить"
3. На появившейся странице выбрать "Оплата по карте"
4. Заполнить поле "Номер карты": 4444 4444 4444 4441
5. Заполнить поля "Месяц", "Год"
6. Заполнить в поле "Владелец" только имя
7. Заполнить поле "CVC/CVV"
8. Нажать кнопку "Продолжить"

**Ожидаемый результат:** Оповещение об ошибке в поле "владелец" и отказ в совершении платежа

#### 12. Заполнить поле владелец на английском языке при покупке в кредит
1. Открыть страницу localhost:8080
2. На странице нажать кнопку "Купить в кредит"
3. На появившейся странице выбрать "Оплата по карте"
4. Заполнить поле "Номер карты": 4444 4444 4444 4441
5. Заполнить поля "Месяц", "Год"
6. Заполнить поле "Владелец" на английском языке: "Ivan Ivanov"
7. Заполнить поле "CVC/CVV"
8. Нажать кнопку "Продолжить"

**Ожидаемый результат:** Оповещение об ошибке в поле "Владелец" и отказ в совершении платежа

#### 13. Заполнить поле "Имя" цифрами при покупке
1. Открыть страницу localhost:8080
2. На странице нажать кнопку "Купить"
3. На появившейся странице выбрать "Оплата по карте"
4. Заполнить поле "Номер карты": 4444 4444 4444 4441
5. Заполнить поля "Месяц", "Год"
6. Заполнить в поле "Владелец": 1234 56789012
7. Заполнить поле "CVC/CVV"
8. Нажать кнопку "Продолжить"

**Ожидаемый результат:** Оповещение об ошибке в поле "Владелец" и отказ в совершении платежа

#### 14. Отправить пустую анкету при покупке
1. Открыть страницу localhost:8080
2. На странице нажать кнопку "Купить"
3. На появившейся странице выбрать "Оплата по карте"
4. Оставить пустым поле "Номер карты"
5. Оставить пустым поля "Месяц", "Год"
6. Оставить пустым поле "Владелец"
7. Оставить пустым поле "CVC/CVV"
8. Нажать кнопку "Продолжить"
   
**Ожидаемый результат:** Оповещение об ошибке в поле "Владелец" и отказ в совершении платежа

## Перечень используемых инструментов с обоснованием выбора
- Intellij Idea Ultimate - популярная среда разработки с поддержкой баз данных
- Junit - библиотека для модульного тестирования, упрощающая написание кода автотестов с помощью аннотаций, подсказывает как настроить зависимости в тестах 
- Selenide - библиотека для автоматизации действий браузера на базе Selenium Webdriver: лаконичный синтаксис для сокращения кода тестов, автоматическое открытие и закрытие браузера после прогона тестов, скриншоты результаты тестов.
- Lombok - библиотека кодогенерации для написания шаблонного кода, подсказывает, какой код еще добавить, какие зависимости
- Faker - библиотека с открытым исходным кодом, которая генерирует тестовые данные без использования реальных данных в тестировании
- Gradle - инструмент автоматизации сборки и управления зависимостями (будет сама выкачивать все требуемые нам библиотеки после того, как будут прописаны зависимости
- Docker - инструмент контейнеризации для работы с базами данными, чтобы результаты тестов в базу записывались валидно.
- Allure - фреймворк для генерации отчетов. Данный фреймворк генерирует более наглядные отчеты, делает скриншоты в случае падения тестов, а также классифицирует дефекты как относящиеся к продукту или к автотестам.
- Git и GitHub - система контроля версий и веб-сервис, необходимы для отслеживания вносимых в проект изменений, последующего удаленного размещения и хранения проекта
## Перечень и описание возможных рисков при автоматизации
- возникновение проблем с разворачиванием инфраструктуры: запуском контейнеров и SUT
- отсутствие документации к сервису для оценки поведения сервиса, соответствует ли его работа документации
- возникновение конфликта в процессе взаимодействия сервиса с СУБД;
- возникновение проблем с поддержкой двух СУБД, настройкой зависимостей, чтобы тесты срабатывали 
- неверная оценка времени, которое потребуется затратить на автоматизацию тестирования  
- дописывание новых тестов, если появится возможность ознакомиться с документацией
## Интервальная оценка с учётом рисков (в часах)
- Подготовка окружения - 8 ч
- Написание кода - 56 ч
- Подготовка документации - 8 ч
- **Итого - 72 ч**
## План сдачи работ
1. Написание тестов до 28.06.2021.
2. Предоставление отчетов до 01.07.2021.
